---
import '../styles/header.scss'
import HeaderNav from './ui/HeaderNav.astro'
---

<header>
	<div class="header-container">
		<div class="header-nav">
			<a href="/#hero" class="header-logo">
				<img src="/images/logo.svg" alt="MrLopez Logo" class="header-logo-img" />
			</a>
			<HeaderNav />
			<div class="header-nav-toggle">toggle</div>
		</div>
		<div class="header-mobile">
			<HeaderNav />
		</div>
	</div>
</header>

<script>
	import gsap from 'gsap'

	// Mobile menu
	const mobileToggle = document.querySelector('.header-nav-toggle')
	const mobileNavMenu = document.querySelector('.header-container')
	const mobileNavMenuItems = document.querySelectorAll('.header-mobile .header-nav-links a')

	const tl = gsap.timeline({ paused: true, reversed: true })

	tl.to(mobileNavMenu, {
		autoAlpha: 1,
		duration: 0.6,
		ease: 'power4.out',
		height: 'auto'
	}).fromTo(
        mobileNavMenuItems,{
            y: 30
        }, {
            y: 0,
            duration: 0.6,
            ease: 'power4.in',
        }
    )

	gsap.set(mobileNavMenu, { autoAlpha: 1, height: '60px' })

	mobileToggle?.addEventListener('click', () => {
		console.log('toggle click')
		tl.reversed() ? tl.play() : tl.reverse() // Toggle animation
	})

	mobileNavMenuItems?.forEach((anchor: any) => {
        anchor.addEventListener('click', () => {
		    console.log('a click', mobileNavMenuItems)
		    tl.reversed() ? tl.play() : tl.reverse() // Toggle animation
	    })
    })

	// Floating nav
	document.addEventListener('scroll', () => {
		const header = document.querySelector('.header-container')

		if (window.scrollY < 250) {
			gsap.to(header, {
				y: 0,
				maxWidth: '1200px',
				left: 0,
				borderRadius: 0,
				padding: '1rem',
				translateX: 0,
				scale: 1,
				border: '1px solid transparent',
				boxShadow: '0px 4px 16px 4px rgba(0, 0, 0, 0)',
				duration: 0.8,
				ease: 'power4.out'
			}) // Show header
		}
		if (window.scrollY > 250) {
			gsap.to(header, {
				y: '1rem',
				maxWidth: '500px',
				borderRadius: '2rem',
				scale: 0.8,
				border: '1px solid rgba(255, 255, 255, 0.1)',
				boxShadow: '4px 4px 16px 4px rgba(0, 0, 0, 0.4)',
				duration: 1,
				padding: '1rem 1.5rem',
				ease: 'power4.out'
			}) // Hide header
		}
	})
</script>
<!-- // <header class="header">
	// <div class="header-container">
		// <nav class="header-nav">
			// <a href="/#hero" class="header-logo">
				// <img src="/images/logo.svg" alt="MrLopez Logo" class="header-logo-img" />
				//
			// </a>
			// <ul class="header-nav-links">
				// { -->
<!-- //                     navLinks.map((link, i) => (
					//                         <li class={`header-nav-links-item${link.type === 'cta' ? ' cta' : ''}`}>
					//                             <a href={link.href}>{link.text}</a>
					//                         </li>
					//                     ))
					//                 }
					//             </ul>
					//             <div class="header-nav-toggle">toggle</div>
					//             <div class="header-mobile">
					// 					<nav class="header-mobile-nav">
					// 						{ -->
<!-- // 							navLinks.map((link, i) => (
					// 								<div class={`header-mobile-nav-item${link.type === 'cta' ? ' cta' : ''}`}>
					// 									<a href={link.href}>{link.text}</a>
					// 								</div>
					// 							))
					// 						}
					//                 </nav>
					// 	</div>
					// </header> -->
<!-- // }
// 			</ul>
// 		</nav>
// 	</div>
// </header> -->
